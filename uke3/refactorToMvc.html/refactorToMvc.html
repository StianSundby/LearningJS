<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Refactor</title>
    <style>
        #homeLink {
            text-decoration: none;
        }
        #homeButton {
            cursor: pointer;
            min-width: none;
            min-height: 3em;
        }
        #hoverTable {
            cursor: pointer;
            font-size: 5em;
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
        }
        #board {
            min-width: 1em;
            min-height: 1em;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <a href="../../index.html" id="homeLink">
        <button id="homeButton">Home</button>
    </a>
    <br><br><br>
    <div id="view"></div>

    <script>
        //model
        var turn = 0;
        var pieceColor1 = "";
        var pieceColor2 = "";
        var pieceColor3 = "";
        var pieceColor4 = "";
        var pieceColor5 = "";
        var pieceColor6 = "";
        var pieceColor7 = "";
        var pieceColor8 = "";
        var pieceColor9 = "";

        //view
        updateView();
        function updateView(){
            document.getElementById("view").innerHTML=`
                <table id="hoverTable">
                    <tr>
                        <td>
                            <div id="board" onclick="changePiece(this, 1)" style="background-color:${pieceColor1}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 2)" style="background-color:${pieceColor2}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 3)" style="background-color:${pieceColor3}"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="board" onclick="changePiece(this, 4)" style="background-color:${pieceColor4}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 5)" style="background-color:${pieceColor5}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 6)" style="background-color:${pieceColor6}"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div id="board" onclick="changePiece(this, 7)" style="background-color:${pieceColor7}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 8)" style="background-color:${pieceColor8}"></div>
                        </td>
                        <td>
                            <div id="board" onclick="changePiece(this, 9)" style="background-color:${pieceColor9}"></div>
                        </td>
                    </tr>
            `;
        }
        //controller
        function changePiece(boardPiece, value) {
            if (turn >= 9){
                alert("no more turns");
                window.location.reload();
            }
            else if (boardPiece.style.backgroundColor === "red"){
                return;
            }
            else if (boardPiece.style.backgroundColor === "blue"){
                return;
            }

            var color;
            if (turn % 2 == 0) {
                color = 'red';
            }
            else {
                color = 'blue';
            }
            if (value === 1){
                pieceColor1 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 2){
                pieceColor2 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 3){
                pieceColor3 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 4){
                pieceColor4 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 5){
                pieceColor5 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 6){
                pieceColor6 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 7){
                pieceColor7 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 8){
                pieceColor8 = color;
                turn++;
                console.log('Turn: '+turn);
            }
            if (value === 9){
                pieceColor9 = color;
                turn++;
                console.log('Turn: '+turn);
            }           
            updateView();
        }
    </script>
</body>

</html>